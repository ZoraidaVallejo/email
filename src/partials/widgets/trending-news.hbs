{{! ================================================================================================================= }}
{{! T R E N D I N G   N E W S                                                                                         }}
{{! ================================================================================================================= }}

{{!
// TODO: Add anotations.
}}
{{!
    * @param {Object}   trendingNews
    * @param {Object[]} trendingNews.events
    * @param {number}   trendingNews.news[].title
    * @param {string}   trendingNews.news[].link
}}

{{#and trendingNews.link (compare trendingNews.link "!==" "")}}
  {{assign "trendingNewsTitleLink" (concat trendingNews.link (utmVariables widgetUtmVars content=widgetUtmVars.content.title))}}
  {{assign "trendingNewsImageLink" (concat trendingNews.link (utmVariables widgetUtmVars content=widgetUtmVars.content.image))}}
{{/and}}

{{! ================================================================================================================= }}

{{#table class="widget w-trending-news set-max-width"}}

  {{#if trendingNews.widget.iconSrc}}
    {{>widget-header
      header=trendingNews.widget.header
      iconSrc=trendingNews.widget.iconSrc
    }}
  {{else}}
    {{>widget-header
      header=trendingNews.widget.header
      icon=trendingNews.widget.icon
    }}
  {{/if}}

  <tr>
    <td class="widget-description{{#unless @root.widgetWithButton}} -no-button{{/unless}}" responsive="mobile-padding-horizontal-sides">
      <div class="widget-wrapper">

        {{>widget-banner
          widgetClass="banner-icon"
          imgSrc=(concat "https://justatic.com/emails/images/newsletters/common/v2/icons/" trendingNews.banner ".png")
          imgAlt=trendingNews.title
          link="#"
        }}

        <p class="subtitle">{{{trendingNews.subtitle}}}</p>

        {{#each trendingNews.columns}}
          {{!--
          // TODO: Maybe move title and description to a component.
          // TODO: Fix classes for content.
          --}}

          <div class="section -no-button">

            {{#if this.colored}}
            <p class="category -{{{this.colored}}}">
                {{{this.category}}}
              </p>
            {{else}}
            <p class="category">
                {{{this.category}}}
              </p>
            {{/if}}

            {{#each this.news}}
            <p class="news">
              {{#and this.link (compare this.link "!==" "")}}<a href="{{{this.link}}}" target="_blank">{{/and}}
                  <b>{{{this.title}}}</b>
              {{#and this.link (compare this.link "!==" "")}}</a>{{/and}}
              </p>
            {{/each}}
          </div>
        {{/each}}
      </div>
    </td>
  </tr>
{{/table}}
